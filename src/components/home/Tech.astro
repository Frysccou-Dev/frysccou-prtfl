---
import { getTranslation } from '../../utils/i18n';
const { lang } = Astro.props;

interface Technology {
  name: string;
  icon: string;
}

interface Category {
  id: string;
  translationKey: string;
  technologies: Technology[];
  gradient: string;
}

const categories: Category[] = [
  {
    id: 'frontend',
    translationKey: 'tech.frontend',
    gradient: 'from-cyan-500 to-blue-600',
    technologies: [
      { name: 'React', icon: 'react' },
      { name: 'Next.js', icon: 'nextjs' },
      { name: 'Astro', icon: 'astro' },
      { name: 'Vue', icon: 'vue' },
      { name: 'Angular', icon: 'angular' },
    ],
  },
  {
    id: 'styling',
    translationKey: 'tech.styling',
    gradient: 'from-pink-500 to-rose-600',
    technologies: [
      { name: 'Tailwind', icon: 'tailwind' },
      { name: 'CSS', icon: 'css' },
      { name: 'Sass', icon: 'sass' },
      { name: 'Less', icon: 'less' },
      { name: 'Figma', icon: 'figma' },
    ],
  },
  {
    id: 'backend',
    translationKey: 'tech.backend',
    gradient: 'from-emerald-500 to-teal-600',
    technologies: [
      { name: 'Node.js', icon: 'nodejs' },
      { name: 'Nest.js', icon: 'nestjs' },
      { name: 'PHP', icon: 'php' },
      { name: 'Python', icon: 'python' },
      { name: 'Java', icon: 'java' },
      { name: 'Spring Boot', icon: 'spring' },
    ],
  },
  {
    id: 'databases',
    translationKey: 'tech.databases',
    gradient: 'from-amber-500 to-orange-600',
    technologies: [
      { name: 'PostgreSQL', icon: 'postgres' },
      { name: 'MySQL', icon: 'mysql' },
      { name: 'MongoDB', icon: 'mongodb' },
      { name: 'Supabase', icon: 'supabase' },
      { name: 'Firebase', icon: 'firebase' },
    ],
  },
  {
    id: 'tools',
    translationKey: 'tech.tools',
    gradient: 'from-violet-500 to-purple-600',
    technologies: [
      { name: 'Git', icon: 'git' },
      { name: 'GitHub', icon: 'github' },
      { name: 'Docker', icon: 'docker' },
    ],
  },
];
---

<section id='conocimientos' class='min-h-screen py-24 relative overflow-hidden'>
  <div class='absolute inset-0 overflow-hidden pointer-events-none'>
    <div
      class='absolute top-1/4 -left-32 w-96 h-96 bg-blue-600/5 rounded-full blur-3xl'
    >
    </div>
    <div
      class='absolute bottom-1/4 -right-32 w-96 h-96 bg-purple-600/5 rounded-full blur-3xl'
    >
    </div>
  </div>

  <div class='max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10'>
    <div class='text-center mb-20'>
      <div
        class='inline-flex items-center gap-2 px-4 py-2 rounded-full bg-blue-500/10 border border-blue-500/20 mb-6'
      >
        <span class='w-2 h-2 bg-blue-400 rounded-full animate-pulse'></span>
        <span class='text-sm font-medium text-blue-400'>Tech Stack</span>
      </div>
      <h2 class='text-4xl sm:text-5xl lg:text-6xl font-bold text-white mb-6'>
        {getTranslation(lang, 'tech.title')}
      </h2>
      <p class='text-lg text-blue-300/80 max-w-2xl mx-auto leading-relaxed'>
        {getTranslation(lang, 'tech.subtitle')}
      </p>
    </div>

    <div class='grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6'>
      {
        categories.slice(0, 3).map((category) => (
          <div class='group relative'>
            <div
              class={`absolute inset-0 bg-gradient-to-br ${category.gradient} opacity-0 group-hover:opacity-10 rounded-2xl transition-opacity duration-500`}
            />
            <div class='relative h-full bg-dark-800/80 backdrop-blur-xl rounded-2xl p-6 border border-dark-600/50 hover:border-blue-500/50 transition-all duration-500 hover:translate-y-[-4px] hover:shadow-2xl hover:shadow-blue-500/10'>
              <div class='flex items-center gap-3 mb-6'>
                <div
                  class={`h-8 px-4 rounded-lg bg-gradient-to-r ${category.gradient} flex items-center justify-center shadow-lg`}
                >
                  <span class='text-xs font-bold text-white uppercase tracking-wider'>
                    {getTranslation(lang, category.translationKey)}
                  </span>
                </div>
              </div>

              <div class='grid grid-cols-5 gap-3'>
                {category.technologies.map((tech) => (
                  <div class='group/tech flex flex-col items-center gap-2'>
                    <div class='relative'>
                      <div class='absolute -inset-2 bg-gradient-to-br from-blue-500/20 to-purple-500/20 rounded-xl opacity-0 group-hover/tech:opacity-100 blur-md transition-all duration-300' />
                      <div class='relative w-11 h-11 bg-dark-700/80 rounded-xl flex items-center justify-center border border-dark-600/50 group-hover/tech:border-blue-500/50 group-hover/tech:scale-110 group-hover/tech:bg-dark-600 transition-all duration-300 shadow-lg'>
                        <img
                          src={`https://skillicons.dev/icons?i=${tech.icon}`}
                          alt={tech.name}
                          class='w-6 h-6'
                          loading='lazy'
                        />
                      </div>
                    </div>
                    <span class='text-[10px] font-medium text-blue-200/70 group-hover/tech:text-blue-200 transition-colors duration-300 text-center leading-tight'>
                      {tech.name}
                    </span>
                  </div>
                ))}
              </div>
            </div>
          </div>
        ))
      }
    </div>

    <div class='grid grid-cols-1 md:grid-cols-2 gap-6 max-w-4xl mx-auto'>
      {
        categories.slice(3).map((category) => (
          <div class='group relative'>
            <div
              class={`absolute inset-0 bg-gradient-to-br ${category.gradient} opacity-0 group-hover:opacity-10 rounded-2xl transition-opacity duration-500`}
            />
            <div class='relative h-full bg-dark-800/80 backdrop-blur-xl rounded-2xl p-6 border border-dark-600/50 hover:border-blue-500/50 transition-all duration-500 hover:translate-y-[-4px] hover:shadow-2xl hover:shadow-blue-500/10'>
              <div class='flex items-center gap-3 mb-6'>
                <div
                  class={`h-8 px-4 rounded-lg bg-gradient-to-r ${category.gradient} flex items-center justify-center shadow-lg`}
                >
                  <span class='text-xs font-bold text-white uppercase tracking-wider'>
                    {getTranslation(lang, category.translationKey)}
                  </span>
                </div>
              </div>

              <div class='flex flex-wrap gap-4 justify-center'>
                {category.technologies.map((tech) => (
                  <div class='group/tech flex flex-col items-center gap-2'>
                    <div class='relative'>
                      <div class='absolute -inset-2 bg-gradient-to-br from-blue-500/20 to-purple-500/20 rounded-xl opacity-0 group-hover/tech:opacity-100 blur-md transition-all duration-300' />
                      <div class='relative w-12 h-12 bg-dark-700/80 rounded-xl flex items-center justify-center border border-dark-600/50 group-hover/tech:border-blue-500/50 group-hover/tech:scale-110 group-hover/tech:bg-dark-600 transition-all duration-300 shadow-lg'>
                        <img
                          src={`https://skillicons.dev/icons?i=${tech.icon}`}
                          alt={tech.name}
                          class='w-7 h-7'
                          loading='lazy'
                        />
                      </div>
                    </div>
                    <span class='text-xs font-medium text-blue-200/70 group-hover/tech:text-blue-200 transition-colors duration-300 text-center'>
                      {tech.name}
                    </span>
                  </div>
                ))}
              </div>
            </div>
          </div>
        ))
      }
    </div>
  </div>
</section>
