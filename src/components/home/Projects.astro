---
import { getTranslation } from '../../utils/i18n';
const { lang } = Astro.props;

interface Project {
  id: string;
  titleKey: string;
  subtitleKey: string;
  descKey: string;
  featuresKey: string;
  featureKeys: string[];
  techKey: string;
  urlKey: string;
  gradient: string;
}

const projects: Project[] = [
  {
    id: 'portfolio',
    titleKey: 'projects.portfolio.title',
    subtitleKey: 'projects.portfolio.subtitle',
    descKey: 'projects.portfolio.description',
    featuresKey: 'projects.portfolio.features',
    featureKeys: [
      'projects.portfolio.feature1',
      'projects.portfolio.feature2',
      'projects.portfolio.feature3',
      'projects.portfolio.feature4',
    ],
    techKey: 'projects.portfolio.tech',
    urlKey: 'projects.portfolio.url',
    gradient: 'from-purple-600 to-purple-800',
  },
  {
    id: 'gymMaster',
    titleKey: 'projects.gymMaster.title',
    subtitleKey: 'projects.gymMaster.subtitle',
    descKey: 'projects.gymMaster.description',
    featuresKey: 'projects.gymMaster.features',
    featureKeys: [
      'projects.gymMaster.feature1',
      'projects.gymMaster.feature2',
      'projects.gymMaster.feature3',
      'projects.gymMaster.feature4',
    ],
    techKey: 'projects.gymMaster.tech',
    urlKey: 'projects.gymMaster.url',
    gradient: 'from-rose-600 to-red-800',
  },
  {
    id: 'zatobox',
    titleKey: 'projects.zatobox.title',
    subtitleKey: 'projects.zatobox.subtitle',
    descKey: 'projects.zatobox.description',
    featuresKey: 'projects.zatobox.features',
    featureKeys: [
      'projects.zatobox.feature1',
      'projects.zatobox.feature2',
      'projects.zatobox.feature3',
      'projects.zatobox.feature4',
    ],
    techKey: 'projects.zatobox.tech',
    urlKey: 'projects.zatobox.url',
    gradient: 'from-cyan-600 to-blue-800',
  },
  {
    id: 'zzyn',
    titleKey: 'projects.zzyn.title',
    subtitleKey: 'projects.zzyn.subtitle',
    descKey: 'projects.zzyn.description',
    featuresKey: 'projects.zzyn.features',
    featureKeys: [
      'projects.zzyn.feature1',
      'projects.zzyn.feature2',
      'projects.zzyn.feature3',
      'projects.zzyn.feature4',
    ],
    techKey: 'projects.zzyn.tech',
    urlKey: 'projects.zzyn.url',
    gradient: 'from-amber-600 to-orange-800',
  },
  {
    id: 'bycarket',
    titleKey: 'projects.bycarket.title',
    subtitleKey: 'projects.bycarket.subtitle',
    descKey: 'projects.bycarket.description',
    featuresKey: 'projects.bycarket.features',
    featureKeys: [
      'projects.bycarket.feature1',
      'projects.bycarket.feature2',
      'projects.bycarket.feature3',
      'projects.bycarket.feature4',
    ],
    techKey: 'projects.bycarket.tech',
    urlKey: 'projects.bycarket.url',
    gradient: 'from-blue-600 to-indigo-800',
  },
  {
    id: 'xview',
    titleKey: 'projects.xview.title',
    subtitleKey: 'projects.xview.subtitle',
    descKey: 'projects.xview.description',
    featuresKey: 'projects.xview.features',
    featureKeys: [
      'projects.xview.feature1',
      'projects.xview.feature2',
      'projects.xview.feature3',
      'projects.xview.feature4',
    ],
    techKey: 'projects.xview.tech',
    urlKey: 'projects.xview.url',
    gradient: 'from-indigo-600 to-purple-800',
  },
  {
    id: 'zynner',
    titleKey: 'projects.zynner.title',
    subtitleKey: 'projects.zynner.subtitle',
    descKey: 'projects.zynner.description',
    featuresKey: 'projects.zynner.features',
    featureKeys: [
      'projects.zynner.feature1',
      'projects.zynner.feature2',
      'projects.zynner.feature3',
      'projects.zynner.feature4',
    ],
    techKey: 'projects.zynner.tech',
    urlKey: 'projects.zynner.url',
    gradient: 'from-emerald-600 to-emerald-800',
  },
  {
    id: 'zynee',
    titleKey: 'projects.zynee.title',
    subtitleKey: 'projects.zynee.subtitle',
    descKey: 'projects.zynee.description',
    featuresKey: 'projects.zynee.features',
    featureKeys: [
      'projects.zynee.feature1',
      'projects.zynee.feature2',
      'projects.zynee.feature3',
      'projects.zynee.feature4',
    ],
    techKey: 'projects.zynee.tech',
    urlKey: 'projects.zynee.url',
    gradient: 'from-teal-600 to-cyan-800',
  },
];

const techData: Record<string, Record<string, string[]>> = {
  en: {
    'projects.portfolio.tech': ['Astro', 'TailwindCSS', 'i18n', 'TypeScript'],
    'projects.gymMaster.tech': [
      'Next.js',
      'TailwindCSS',
      'Shadcn UI',
      'Supabase',
    ],
    'projects.zatobox.tech': [
      'Full Stack',
      'DevOps',
      'Cloud Architecture',
      'Scalability',
    ],
    'projects.zzyn.tech': [
      'Nuxt.js',
      'Framer Motion',
      'TailwindCSS',
      'TypeScript',
    ],
    'projects.bycarket.tech': [
      'Next.js',
      'Nest.js',
      'AI Integration',
      'Stripe',
    ],
    'projects.xview.tech': [
      'React',
      'Glassmorphism',
      'Framer Motion',
      'JWT Auth',
    ],
    'projects.zynner.tech': [
      'Modern Web',
      'Responsive Design',
      'Portfolio',
      'Professional',
    ],
    'projects.zynee.tech': [
      'Financial App',
      'Real-time Data',
      'Secure Architecture',
      'Analytics',
    ],
  },
  es: {
    'projects.portfolio.tech': ['Astro', 'TailwindCSS', 'i18n', 'TypeScript'],
    'projects.gymMaster.tech': [
      'Next.js',
      'TailwindCSS',
      'Shadcn UI',
      'Supabase',
    ],
    'projects.zatobox.tech': [
      'Full Stack',
      'DevOps',
      'Cloud Architecture',
      'Escalabilidad',
    ],
    'projects.zzyn.tech': [
      'Nuxt.js',
      'Framer Motion',
      'TailwindCSS',
      'TypeScript',
    ],
    'projects.bycarket.tech': [
      'Next.js',
      'Nest.js',
      'AI Integration',
      'Stripe',
    ],
    'projects.xview.tech': [
      'React',
      'Glassmorphism',
      'Framer Motion',
      'JWT Auth',
    ],
    'projects.zynner.tech': [
      'Web Moderno',
      'Diseño Responsive',
      'Portfolio',
      'Profesional',
    ],
    'projects.zynee.tech': [
      'App Financiera',
      'Datos en Tiempo Real',
      'Arquitectura Segura',
      'Análisis',
    ],
  },
};

const urlData: Record<string, string> = {
  'projects.portfolio.url': 'https://frysccou-dev.vercel.app/',
  'projects.gymMaster.url': 'https://gym-master-new.vercel.app',
  'projects.zatobox.url': 'https://zatobox.io/',
  'projects.zzyn.url': 'https://zzyn.vercel.app/',
  'projects.bycarket.url': 'https://bycarket-front-main.vercel.app/home',
  'projects.xview.url': 'https://xview-f.vercel.app/',
  'projects.zynner.url': 'https://zynner-portfolio.vercel.app/',
  'projects.zynee.url': 'https://zynee.vercel.app/',
};

function getTech(key: string): string[] {
  return (techData[lang] as Record<string, string[]>)[key] || [];
}

function getUrl(key: string): string {
  return urlData[key] || '#';
}
---

<section id='proyectos' class='min-h-screen bg-blue-50 py-20'>
  <div class='max-w-7xl mx-auto px-4 sm:px-6 lg:px-8'>
    <div class='text-center mb-20'>
      <h2 class='text-4xl sm:text-5xl lg:text-6xl font-bold text-blue-950 mb-6'>
        {getTranslation(lang, 'home.title')}
      </h2>
      <p class='text-lg text-blue-700 max-w-3xl mx-auto'>
        {getTranslation(lang, 'home.subtitle')}
      </p>
    </div>

    <div class='grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6'>
      {
        projects.map((project) => {
          const tech = getTech(project.techKey);
          const url = getUrl(project.urlKey);
          return (
            <div class='group h-full'>
              <div class='relative h-full bg-white/70 backdrop-blur-sm border border-blue-100/50 rounded-3xl p-8 hover:border-blue-200/80 hover:shadow-lg transition-all duration-500 overflow-hidden'>
                <div
                  class={`absolute -top-1 -right-1 w-24 h-24 bg-gradient-to-br ${project.gradient} rounded-full blur-3xl opacity-10 group-hover:opacity-20 transition-opacity duration-500`}
                />

                <div class='relative z-10'>
                  <div
                    class={`w-14 h-14 bg-gradient-to-br ${project.gradient} rounded-2xl flex items-center justify-center mb-6 shadow-lg`}
                  >
                    <svg
                      class='w-7 h-7 text-white'
                      fill='none'
                      stroke='currentColor'
                      viewBox='0 0 24 24'
                    >
                      <path
                        stroke-linecap='round'
                        stroke-linejoin='round'
                        stroke-width='2'
                        d='M13 10V3L4 14h7v7l9-11h-7z'
                      />
                    </svg>
                  </div>

                  <h3 class='text-2xl font-bold text-blue-950 mb-2'>
                    {getTranslation(lang, project.titleKey)}
                  </h3>

                  <p
                    class={`text-sm font-semibold mb-4 bg-gradient-to-r ${project.gradient} bg-clip-text text-transparent`}
                  >
                    {getTranslation(lang, project.subtitleKey)}
                  </p>

                  <p class='text-blue-700 text-sm leading-relaxed mb-6'>
                    {getTranslation(lang, project.descKey)}
                  </p>

                  <div class='mb-6'>
                    <h4 class='text-xs font-bold text-blue-900 uppercase tracking-wider mb-3'>
                      {getTranslation(lang, project.featuresKey)}
                    </h4>
                    <ul class='space-y-2'>
                      {project.featureKeys.map((featureKey) => (
                        <li class='flex items-start gap-2 text-xs text-blue-800'>
                          <span
                            class={`mt-1.5 w-1.5 h-1.5 bg-gradient-to-br ${project.gradient} rounded-full flex-shrink-0`}
                          />
                          <span>{getTranslation(lang, featureKey)}</span>
                        </li>
                      ))}
                    </ul>
                  </div>

                  <div class='flex flex-wrap gap-2 mb-6'>
                    {tech.map((t) => (
                      <span class='px-2.5 py-1 text-xs font-medium text-blue-900 bg-blue-100/60 rounded-lg border border-blue-200/50'>
                        {t}
                      </span>
                    ))}
                  </div>

                  <a
                    href={url}
                    target='_blank'
                    rel='noopener noreferrer'
                    class={`inline-flex items-center gap-2 bg-gradient-to-r ${project.gradient} hover:shadow-lg text-white px-6 py-3 rounded-xl font-medium transition-all duration-300 w-full justify-center`}
                  >
                    <span>{getTranslation(lang, 'home.viewLiveSite')}</span>
                    <svg
                      class='w-4 h-4'
                      fill='none'
                      stroke='currentColor'
                      viewBox='0 0 24 24'
                    >
                      <path
                        stroke-linecap='round'
                        stroke-linejoin='round'
                        stroke-width='2'
                        d='M13 7l5 5m0 0l-5 5m5-5H6'
                      />
                    </svg>
                  </a>
                </div>
              </div>
            </div>
          );
        })
      }
    </div>
  </div>
</section>
